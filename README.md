# mipt-gos


## Задание
Предложите алгоритм, который позволит эффективно хранить множественные однотипные данные - диагностические сообщения. Каждое сообщение выглядит как одна из шаблонных строк, в которую подставлено несколько значений. Количество шаблонов фиксированное и не больше 1000. 

Необходимо уметь эффективно сериализовать/десериализовать подобные сообщения в файл/из файла.

Пример: В модуле ТАКСИ произошла ошибка доступа водителя ИВАНА (В модуле НАЗВАНИЕ_МОДУЛЯ произошла ошибка НАЗВАНИЕ_ОШИБКИ СУБЪЕКТ_ОШИБКИ)

## Входные данные:
2) Файл с шаблонами сообщений. Вместо `{}` в сообщениях должно лежать слово(Не содержащий пробелов, кавычек и запятых набор букв и цифр, при необходимости используйте `_`) 
    ```json
    [
      "В модуле {} произошла ошибка {} у {}",
      "Произошла ошибка в модуле {} {}",
      "Все разнесло {} {}"
    ]
    ```

2) Файл с диагностическими сообщениями (каждое сообщение на новой строке). Сообщения должны подходить под один из паттернов файла с шаблонами, иначе сжатие/разжатие не удастся. Файл должен заканчиваться переводом строки.
    ```
    В модуле ТАКСИ произошла ошибка ДОСТУПА у ИВАНА 
    В модуле ЕДА произошла ошибка НОБРАБОТННАЯ у ПЕТРА
    ... 
    ```

## Подготовка окружения
Выполнить в корне репозитория
1) `virtualenv venv -p python3.9`
1) `source venv/bin/activate`
1) `export PYTHONPATH=${PYTHONPATH}:.`

### Использование
1) `python compressor.py --mode compress --input_file tests/raw_messages.txt --output_file tests/raw_compresses.txt --templates tests/templates.json`
1) `python compressor.py --mode decompress --input_file tests/raw_compresses.txt --output_file tests/raw_compresses_decompressed.txt --templates tests/templates.json`

### Запуск тестов 
1) `cd tests`
1) `python tests/test.py`


### Подробнее
Последняя стабильная версия - с ипользование LZW, после шаблонного сжатия.

Для того, чтобы попробовать только шаблонное сжатие `git checkout fe662783d4a0cedc5b1c8da80ed8fcdb3a8de9a0  `
